---
import Canvas3D from "../components/Canvas3D/Canvas3D.jsx";
import SubHBox from "../components/ui/SubHBox.astro";
const githubIcon = await import("/assets/icons/github.svg?raw");
const linkedinIcon = await import("/assets/icons/linkedin.svg?raw");
const contactEmailAddress = "connect.jessep@gmail.com";
---

<section
  id="CONNECT"
  class="relative flex h-halfScreen min-h-132 w-full max-w-9xl items-center justify-center"
>
  <Canvas3D
    cameraPosition={[2, -0.1, 2.4]}
    cameraRotation={[-0.1, 0.69, 0.16]}
    cameraFar={10}
    cameraFov={22}
    enableCharacter={false}
    enablePresentation={false}
    meshScale={0.2}
    client:visible
  />
  <div
    class="absolute min-h-56 w-10/12 max-w-lg self-center bg-gradient-to-t from-violet-700 from-20% to-brandMain to-100% max-sm:mb-10 max-sm:self-end max-xs:w-11/12"
  >
    <SubHBox side="left">Connect</SubHBox>
    <div
      class="relative m-0.75 flex min-h-56 flex-col items-center justify-center self-center bg-white p-6 pt-8"
    >
      <div class="mt-8"></div>
      <p class="text-lg">
        To get in touch, you can contact me at this email ðŸ˜Š
      </p>
      <div class="mt-4"></div>
      <div
        title="Copy to clipboard"
        id="CONTACT-EMAIL"
        class="relative h-7 w-fit cursor-pointer"
      >
        <button
          class="flex h-7 w-fit items-center gap-3 text-lg text-brandMain hover:font-bold max-xs:text-base"
          id="COPY-EMAIL"
        >
          <span>{contactEmailAddress}</span>
          <img
            title="Copy to clipboard"
            alt="Copy to clipboard"
            class="h-fit w-6 select-none"
            src="/assets/icons/copy-to-clipboard.svg"
          /><span
            role="presentation"
            id="COPY-ANIMATION-TEXT"
            class="absolute -top-4 right-4 block select-none whitespace-nowrap font-brandFont text-3xl font-bold text-green-500 opacity-0"
            >Copied to Clipboard!</span
          >
        </button>
      </div>
      <div class="mt-8"></div>
      <div class="flex w-full flex-wrap justify-center gap-4">
        <a
          class="bg-x--10rem relative flex h-12 w-fit animate-bgSlideLeft items-center border-2 border-brandMain bg-gradient-to-r from-brandMain from-100% to-white to-200% bg-no-repeat fill-brandMain px-8 py-1 font-brandFont text-2xl font-medium text-brandMain hover:animate-bgSlideRight max-sm:px-4"
          href="https://www.linkedin.com/in/jesse-pernil%C3%A4-52a9b8192/"
          target="_blank"
          >LinkedIn <svg
            viewBox="0 0 24 24"
            class="relative left-2 h-full w-8 fill-inherit stroke-none"
            set:html={`
      <title>Linkedin Profile Link</title>
      ${linkedinIcon.default}
      `}
          /></a
        >
        <a
          class="bg-x--10rem relative flex h-12 w-fit animate-bgSlideLeft items-center border-2 border-brandMain bg-gradient-to-r from-brandMain from-100% to-white to-200% bg-no-repeat fill-brandMain px-8 py-1 font-brandFont text-2xl font-medium text-brandMain hover:animate-bgSlideRight max-sm:px-4"
          href="https://github.com/jessejp"
          target="_blank"
          >GitHub <svg
            viewBox="0 0 24 24"
            class="relative left-2 h-full w-6 fill-inherit stroke-none"
            set:html={`
  <title>GitHub Profile Link</title>
  ${githubIcon.default}
  `}
          /></a
        >
      </div>
    </div>
  </div>
</section>

<script define:vars={{ contactEmailAddress }}>
  const copyEmail = document.getElementById("COPY-EMAIL");
  const email = document.getElementById("CONTACT-EMAIL");
  const copyAnimation = document.getElementById("COPY-ANIMATION-TEXT");
  let animationRemoveTimeout = null;

  copyEmail.addEventListener("click", () => {
    clearTimeout(animationRemoveTimeout);
    navigator.clipboard.writeText(contactEmailAddress);
    email.classList.add("animate-copied");
    copyAnimation.classList.add("animate-copiedFloatingText");

    animationRemoveTimeout = setTimeout(() => {
      email.classList.remove("animate-copied");
      copyAnimation.classList.remove("animate-copiedFloatingText");
    }, 800);
  });
</script>
